<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <meta charset="UTF-8">
  <title>GatherChain</title>

</head>

<body>
  <header class="header">
    <h2 style="display: inline;" id="header">Header</h2>
    <button onClick="Refresh()" class="btn" style="float: right"><i class="fa fa-refresh"></i></button>
  </header>

<div class="content">
  <p id="1"></p>
  </div>

  <script>window.$ = window.jQuery = require('jquery');</script>

  <script>
    const execSync = require('child_process').execSync;
    const res = execSync('./commands/history.sh ' + process.env.PROJECT_PATH, { encoding: 'utf-8' });  // the default is 'buffer'
    var lines = res.split(/\n/);
    var output = [];
    var outputText = [];
    for (var i = 0; i < lines.length; i++) {
      // only push this line if it contains a non whitespace character.
      if (/\S/.test(lines[i])) {
        outputText.push('"' + $.trim(lines[i]) + '"');
        output.push($.trim(lines[i]));
      }
    }
    console.log(output);

    var ul = document.createElement('ul');
    ul.className = "list-ic vertical";

    document.getElementById('1').appendChild(ul);

    i = 1;
    output.forEach(function (item) {
      let a = document.createElement('a');
      let span = document.createElement('span');
      let li = document.createElement('li');
      li.appendChild(span);
      li.appendChild(a);
      ul.appendChild(li);
      span.innerHTML = i;
      i++;
      a.innerHTML += " " + item;
    });
    
    function Refresh() {
      window.location = "home.html";
    }

    let h2 = document.getElementById('header');
    const groupName = execSync('./commands/getgroup.sh ' + process.env.PROJECT_PATH, { encoding: 'utf-8' });  // the default is 'buffer'
    console.log("result: " + groupName);
    //h2.innerHTML = groupName;
    h2.innerHTML = "12345-54321-67890"

  </script>
</body>

</html>